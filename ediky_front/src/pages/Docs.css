/* Light theme: softened palette for a minimalist look */
:root[data-dz-theme="light"] {
    --dz-bg: #f9fafc;
    --dz-bg-2: #f3f6fa;
    --dz-panel: #ffffff;
    --dz-border: #e4e8f1;
    --dz-border-soft: #ebeff6;
    --dz-text: #1f2a48;
    --dz-muted: #6d7da1;
    --dz-accent: #5469ff;
    --dz-chip: #edf2fe;
    --dz-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
    --dz-radius: 14px;
    --dz-btn-soft-bg: #f5f7fc;
    --dz-btn-soft-bd: #d8dfe9;
    --dz-btn-ghost-bd: #d8dfe9;
    --dz-btn-text: var(--dz-text);
    --dz-dock-bg: var(--dz-panel);
}

/* Dark theme: modern low-contrast aesthetic */
:root[data-dz-theme="dark"] {
    --dz-bg: #0d1222;
    --dz-bg-2: #101622;
    --dz-panel: #141d31;
    --dz-border: #202b42;
    --dz-border-soft: #19233a;
    --dz-text: #e9f0ff;
    --dz-muted: #8fa3c7;
    --dz-accent: #7c90ff;
    --dz-chip: #15203a;
    --dz-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
    --dz-radius: 16px;
    --dz-btn-soft-bg: #1a253d;
    --dz-btn-soft-bd: #293655;
    --dz-btn-ghost-bd: #33406a;
    --dz-btn-text: var(--dz-text);
    --dz-dock-bg: #141d31;
}

/* Layout updates */
.dz-frame {
    display: grid;
    grid-template-columns: 260px 1fr;
    gap: 18px;
    padding: 18px;
    min-height: 100vh;
    color: var(--dz-text);
    background:
        radial-gradient(1200px 600px at 20% -10%, rgba(84, 105, 255, 0.08), transparent),
        linear-gradient(180deg, var(--dz-bg), var(--dz-bg-2));
}

.dz-frame.dz-rail-collapsed {
    grid-template-columns: 16px 1fr;
}

/* Left rail and peek */
.dz-left-peek {
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 10px;
    z-index: 6;
}

/* Left rail styling: slimmer borders, softer shadow */
.dz-rail {
    background: var(--dz-panel);
    border: 1px solid var(--dz-border);
    border-radius: var(--dz-radius);
    padding: 12px;
    position: sticky;
    top: 18px;
    height: max-content;
    box-shadow: var(--dz-shadow);
    transition: transform .22s ease, opacity .2s ease, width .22s ease;
}

.dz-rail.dz-left.dz-closed {
    transform: translateX(-12px);
    opacity: 0;
    pointer-events: none;
    width: 0;
    padding: 0;
    border-width: 0;
    box-shadow: none;
}

.dz-rail.dz-left.dz-open {
    opacity: 1;
}

/* Brand row and search */
.dz-rail-hide {
    margin-left: auto;
    background: transparent;
    border: 1px solid var(--dz-border);
    color: var(--dz-muted);
    border-radius: 8px;
    padding: 2px 8px;
    cursor: pointer;
}

.dz-brand-row {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 6px 8px 10px;
}

.dz-brand-dot {
    width: 26px;
    height: 26px;
    border-radius: 8px;
    background: linear-gradient(135deg, #738dff, #a6b7ff);
}

.dz-brand-name {
    font-weight: 700;
    letter-spacing: .2px;
}

.dz-rail-search-wrap {
    margin: 4px 8px 10px;
}

.dz-rail-search {
    width: 100%;
    padding: 10px 12px;
    border-radius: 12px;
    border: 1px solid var(--dz-border);
    background: var(--dz-btn-soft-bg);
    color: var(--dz-text);
}

/* Navigation links */
.dz-rail-links {
    display: flex;
    flex-direction: column;
    gap: 4px;
    margin-top: 6px;
}

.dz-rail-link {
    display: flex;
    align-items: center;
    gap: 10px;
    text-align: left;
    padding: 8px 10px;
    border-radius: 10px;
    border: 1px solid transparent;
    background: transparent;
    color: var(--dz-text);
    cursor: pointer;
    font-size: 14px;
}

.dz-rail-link .dz-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--dz-border);
}

.dz-rail-link:hover {
    background: rgba(84, 105, 255, .08);
}

.dz-rail-link.dz-active {
    background: rgba(84, 105, 255, .16);
    border-color: rgba(84, 105, 255, .35);
}

/* Main content area */
.dz-main {
    background: transparent;
    border: 0;
    border-radius: 0;
    box-shadow: none;
}

/* Header: sticky with subtle blur */
.dz-header {
    position: sticky;
    top: 0;
    z-index: 5;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--dz-border);
    background: linear-gradient(180deg, var(--dz-panel), transparent);
    backdrop-filter: saturate(1.1) blur(6px);
}

.dz-crumbs {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 13px;
    color: var(--dz-muted);
}

.dz-crumb-back {
    border: 1px solid var(--dz-border);
    background: transparent;
    border-radius: 8px;
    padding: 2px 8px;
    cursor: pointer;
    color: var(--dz-text);
}

.dz-crumb.dz-sep {
    opacity: .5;
}

.dz-crumb.dz-current {
    color: var(--dz-text);
    font-weight: 600;
}

.dz-actions {
    display: flex;
    align-items: center;
    gap: 8px;
}

.dz-only-collapsed {
    display: none;
}

.dz-frame.dz-rail-collapsed .dz-only-collapsed {
    display: inline-flex;
}

.dz-badge {
    font-size: 12px;
    padding: 6px 8px;
    border-radius: 999px;
    background: var(--dz-chip);
    margin-right: 6px;
}

/* Tool dock */
.dz-tool-dock {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    border-bottom: 1px solid var(--dz-border);
    background: var(--dz-dock-bg);
    padding: 10px 14px;
}

.dz-tool-dock.dz-collapsed .dz-tool-left {
    display: none;
}

.dz-dock-toggle {
    border: 1px solid var(--dz-btn-soft-bd);
    background: var(--dz-btn-soft-bg);
    color: var(--dz-btn-text);
    border-radius: 10px;
    padding: 6px 10px;
    cursor: pointer;
}

.dz-tool-left {
    display: flex;
    align-items: center;
    gap: 10px;
    flex-wrap: wrap;
}

.dz-tool-group {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 6px 10px;
    border: 1px solid var(--dz-btn-soft-bd);
    background: var(--dz-btn-soft-bg);
    border-radius: 12px;
}

.dz-tool-group label {
    font-size: 12px;
    opacity: .85;
    margin-right: 4px;
}

.dz-tool-group input[type="color"] {
    width: 32px;
    height: 32px;
    padding: 0;
    border: none;
    background: transparent;
}

.dz-tool-group input[type="range"] {
    width: 120px;
}

.dz-tool-group select.dz-select-style {
    border: 1px solid var(--dz-btn-soft-bd);
    background: var(--dz-btn-soft-bg);
    color: var(--dz-text);
    border-radius: 6px;
    padding: 4px 8px;
}

.dz-tool-val {
    font-size: 12px;
    opacity: .8;
}

.dz-tool-sep {
    width: 1px;
    height: 26px;
    background: var(--dz-border);
    margin: 0 6px;
}

.dz-btn-soft.dz-on {
    outline: 2px solid var(--dz-accent);
    outline-offset: 2px;
}

/* Buttons */
.dz-btn,
.dz-btn-soft,
.dz-btn-ghost,
.dz-btn-icon {
    appearance: none;
    font: inherit;
    color: var(--dz-btn-text);
    border-radius: 12px;
    border: 1px solid transparent;
    cursor: pointer;
    padding: 8px 12px;
    transition: background .18s, border-color .18s, transform .08s;
    background: none;
}

.dz-btn:hover,
.dz-btn-soft:hover,
.dz-btn-ghost:hover,
.dz-btn-icon:hover {
    transform: translateY(-1px);
}

.dz-btn:active,
.dz-btn-soft:active,
.dz-btn-ghost:active,
.dz-btn-icon:active {
    transform: translateY(0);
}

.dz-btn:focus-visible,
.dz-btn-soft:focus-visible,
.dz-btn-ghost:focus-visible,
.dz-btn-icon:focus-visible {
    outline: 2px solid var(--dz-accent);
    outline-offset: 2px;
}

.dz-btn {
    background: var(--dz-accent);
    color: #fff;
}

.dz-btn-soft {
    background: var(--dz-btn-soft-bg);
    border-color: var(--dz-btn-soft-bd);
}

.dz-btn-ghost {
    background: transparent;
    border-color: var(--dz-btn-ghost-bd);
}

.dz-btn-icon {
    width: 36px;
    height: 36px;
    padding: 0;
    display: grid;
    place-items: center;
    border-radius: 999px;
    background: var(--dz-btn-soft-bg);
    border-color: var(--dz-btn-soft-bd);
    font-size: 16px;
}

.dz-btn-ghost.dz-small {
    padding: 4px 8px;
    font-size: 12px;
}

.dz-sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    border: 0;
}

/* Reading area */
.dz-doc-wrap {
    max-width: 1100px;
    margin: 0 auto;
    padding: 22px 22px 28px;
}

.dz-title {
    margin: 0;
    font-size: 28px;
    font-weight: 800;
    letter-spacing: .2px;
}

.dz-sub {
    font-size: 12px;
    color: var(--dz-muted);
    margin-top: 4px;
}

.dz-article {
    padding-top: 14px;
    line-height: 1.7;
}

.dz-md-host {
    font-size: 15.5px;
}

.dz-md-host h1,
.dz-md-host h2,
.dz-md-host h3 {
    margin-top: 1.25em;
}

.dz-md-host p {
    margin: .7em 0;
}

.dz-md-host blockquote {
    margin: 10px 0;
    padding: 10px 12px;
    border-left: 3px solid var(--dz-border);
    background: var(--dz-btn-soft-bg);
    border-radius: 10px;
}

/* Paragraph note affordance */
.dz-para-wrap {
    position: relative;
}

.dz-para-note-btn {
    position: absolute;
    left: -28px;
    top: 2px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    border: 1px solid var(--dz-btn-soft-bd);
    background: var(--dz-btn-soft-bg);
    color: var(--dz-btn-text);
    opacity: 0;
    pointer-events: auto;
    cursor: pointer;
    transition: opacity .15s, transform .1s;
    display: grid;
    place-items: center;
    font-size: 12px;
}

.dz-para-wrap:hover .dz-para-note-btn {
    opacity: 1;
}

.dz-para-note-btn:hover {
    transform: translateY(-1px);
}

/* Selection bubble */
.dz-selection-bar {
    position: absolute;
    transform: translate(-50%, -110%);
    z-index: 1000;
    background: var(--dz-panel);
    border: 1px solid var(--dz-border);
    border-radius: 999px;
    padding: 6px;
    display: flex;
    gap: 6px;
    box-shadow: var(--dz-shadow);
    backdrop-filter: saturate(1.2) blur(6px);
}

/* Annotations */
.dz-hl {
    background: #ffd76a;
    padding: 0 .1em;
    border-radius: 4px;
}

.dz-ul {
    cursor: pointer;
}

/* Annotation context menu */
.dz-ann-menu {
    position: absolute;
    transform: translate(-50%, -120%);
    z-index: 1000;
    background: var(--dz-panel);
    border: 1px solid var(--dz-border);
    border-radius: 8px;
    padding: 8px;
    display: flex;
    gap: 8px;
    box-shadow: var(--dz-shadow);
    backdrop-filter: saturate(1.2) blur(6px);
}

/* Activity */
.dz-muted {
    color: var(--dz-muted);
}

.dz-activity {
    margin-top: 26px;
}

.dz-activity h3 {
    margin: 0 0 10px;
    font-size: 16px;
}

.dz-act-row {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    padding: 10px 8px;
    border: 1px solid var(--dz-border);
    border-radius: 12px;
    background: var(--dz-panel);
    margin-bottom: 8px;
}

.dz-act-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-top: 7px;
    background: #47527a;
}

.dz-act-dot.dz-note {
    background: #7bbf8f;
}

/* Forms */
.dz-form-row {
    display: flex;
    flex-direction: column;
    margin-bottom: 12px;
}

.dz-form-row label {
    font-size: 12px;
    color: var(--dz-muted);
    margin-bottom: 4px;
}

.dz-form-row input,
.dz-form-row select,
.dz-form-row textarea {
    padding: 8px 10px;
    border: 1px solid var(--dz-border);
    border-radius: 8px;
    font-size: 14px;
    background: var(--dz-btn-soft-bg);
    color: var(--dz-text);
}

.dz-form-row textarea {
    resize: vertical;
}

.dz-form-row input:focus,
.dz-form-row select:focus,
.dz-form-row textarea:focus {
    outline: none;
    border-color: var(--dz-accent);
}

.dz-form-actions {
    display: flex;
    gap: 10px;
    margin-top: 12px;
}

/* Properties Drawer */
.dz-props-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .35);
    z-index: 60;
}

.dz-props-panel {
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    width: 360px;
    max-width: 90vw;
    background: var(--dz-panel);
    border-left: 1px solid var(--dz-border);
    box-shadow: var(--dz-shadow);
    z-index: 61;
    padding: 12px;
    overflow-y: auto;
}

.dz-props-head {
    font-weight: 800;
    font-size: 14px;
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}

.dz-props-head.sticky {
    position: sticky;
    top: 0;
    background: var(--dz-panel);
    padding-bottom: 8px;
    z-index: 1;
}

.dz-prop-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 10px 6px;
    border-bottom: 1px dashed var(--dz-border);
}

.dz-prop-row:last-child {
    border-bottom: 0;
}

.dz-prop-label {
    font-size: 12px;
    color: var(--dz-muted);
}

.dz-prop-value {
    font-size: 13px;
}

.dz-prop-badge {
    font-size: 12px;
    font-weight: 700;
    padding: 6px 12px;
    border-radius: 999px;
    background: linear-gradient(180deg, rgba(255, 255, 255, .08), rgba(255, 255, 255, .04));
    border: 1px solid var(--dz-btn-ghost-bd);
    color: var(--dz-text);
}

.dz-prop-badge.dz-status.in-progress {
    background: rgba(98, 139, 255, .20);
    border-color: rgba(98, 139, 255, .5);
}

.dz-prop-badge.dz-priority.low {
    background: rgba(132, 214, 164, .18);
    border-color: rgba(132, 214, 164, .45);
}

.dz-prop-avatar {
    display: flex;
    align-items: center;
    gap: 8px;
}

.dz-avatar-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: #ff7a7a;
    box-shadow: 0 0 0 2px rgba(255, 122, 122, .2);
}

.dz-prop-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
}

.dz-chip {
    display: inline-block;
    padding: 6px 10px;
    background: var(--dz-chip);
    border-radius: 999px;
    font-size: 12px;
    border: 1px solid var(--dz-btn-ghost-bd);
    color: var(--dz-text);
}

/* Notes inside drawer */
.dz-note {
    border: 1px solid var(--dz-border);
    border-radius: 12px;
    padding: 10px;
    margin-bottom: 8px;
}

.dz-note-ctx {
    font-size: 12px;
    color: var(--dz-muted);
    margin-top: 6px;
}

.dz-note-meta {
    font-size: 11px;
    color: var(--dz-muted);
    margin-top: 2px;
}

/* Floating Properties opener */
.dz-props-fab {
    position: fixed;
    right: 20px;
    bottom: 22px;
    z-index: 59;
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 12px;
    border-radius: 999px;
    background: var(--dz-panel);
    border: 1px solid var(--dz-border);
    box-shadow: var(--dz-shadow);
    color: var(--dz-text);
}

/* Inline code */
.dz-inline-code {
    padding: 0 .35em;
    border-radius: 6px;
    border: 1px solid var(--dz-border);
    background: var(--dz-btn-soft-bg);
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: .95em;
}

/* Boxed code block + editor */
.dz-codebox {
    border: 1px solid var(--dz-border);
    border-radius: 12px;
    overflow: hidden;
    background: var(--dz-panel);
    box-shadow: var(--dz-shadow);
    margin: 14px 0;
}

.dz-codebox-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    padding: 8px 10px;
    border-bottom: 1px solid var(--dz-border);
    background:
        linear-gradient(180deg, rgba(255, 255, 255, 0.04), rgba(255, 255, 255, 0));
}

.dz-codebox-left {
    display: flex;
    align-items: center;
    gap: 8px;
}

.dz-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 12px;
    font-weight: 700;
    padding: 6px 10px;
    border-radius: 999px;
    background: var(--dz-chip);
    border: 1px solid var(--dz-btn-ghost-bd);
}

.dz-codebox-select {
    border: 1px solid var(--dz-btn-soft-bd);
    background: var(--dz-btn-soft-bg);
    color: var(--dz-text);
    border-radius: 8px;
    padding: 4px 8px;
    font-size: 12px;
}

.dz-codebox-actions {
    display: flex;
    align-items: center;
    gap: 6px;
}

.dz-pre {
    margin: 0;
    padding: 14px 16px;
    overflow-x: auto;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 13.5px;
    line-height: 1.6;
    background: var(--dz-btn-soft-bg);
}

/* Simple per-lang hook (use if you later add highlighting) */
.dz-pre-python {}

.dz-pre-cpp {}

.dz-pre-c {}

.dz-pre-javascript {}

.dz-pre-java {}

.dz-codebox-editor {
    width: 100%;
    min-height: 160px;
    border: 0;
    outline: none;
    padding: 14px 16px;
    background: var(--dz-btn-soft-bg);
    color: var(--dz-text);
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    font-size: 13.5px;
    line-height: 1.6;
    resize: vertical;
}

.dz-table-wrap {
    overflow-x: auto;
    margin: 12px 0;
    border: 1px solid var(--dz-border);
    border-radius: 12px;
    background: var(--dz-panel);
    box-shadow: var(--dz-shadow);
}

.dz-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0;
    font-size: 14px;
}

.dz-table thead th {
    position: sticky;
    /* header sticks during horizontal scroll */
    top: 0;
    background: var(--dz-btn-soft-bg);
    text-align: left;
    font-weight: 700;
    border-bottom: 1px solid var(--dz-border);
}

.dz-table th,
.dz-table td {
    padding: 10px 12px;
    border-bottom: 1px solid var(--dz-border);
    vertical-align: top;
}

.dz-table tr:last-child td {
    border-bottom: 0;
}

.dz-table tbody tr:hover td {
    background: rgba(84, 105, 255, .06);
}